# ğŸ” Guide Complet â€“ Chiffrement des Connexions RÃ©seau en Entreprise

## ğŸ¯ Objectif

Assurer la **confidentialitÃ©**, l'**intÃ©gritÃ©** et l'**authenticitÃ©** des communications rÃ©seau internes et externes, via le **chiffrement** Ã  tous les niveaux du SI (services, accÃ¨s, tunnels, administration).

---

## ğŸ§  1. Principes de base

- ğŸ”’ **Chiffrement** : rendre les donnÃ©es illisibles sans clÃ©
- ğŸ§¾ **Authentification** : certifier lâ€™identitÃ© des participants
- ğŸ”„ **IntÃ©gritÃ©** : vÃ©rifier que les donnÃ©es n'ont pas Ã©tÃ© altÃ©rÃ©es
- âœ… **ConformitÃ©** : rÃ©pondre aux exigences RGPD, ISO 27001, NIS2...

---

## ğŸ“¡ 2. Protocoles Ã  utiliser (et Ã  proscrire)

| Usage                    | RecommandÃ©                       | Ã€ proscrire                      |
|--------------------------|----------------------------------|----------------------------------|
| Site Web                 | **HTTPS (TLS 1.2/1.3)**          | HTTP, TLS 1.0/1.1                |
| AccÃ¨s distant            | **SSH, OpenVPN, WireGuard**      | Telnet, PPTP                     |
| Fichiers/Partages        | **SMB v3 (avec encryption)**     | FTP, SMB v1                      |
| Administration systÃ¨me   | **SSH, RDP via VPN ou TLS**      | Rlogin, VNC en clair             |
| Mails                    | **SMTP/TLS, IMAPS, POP3S**       | SMTP/25, POP3/110                |
| RÃ©plication DB / API     | **TLS 1.2/1.3**                  | Connexions TCP non chiffrÃ©es     |

---

## ğŸ› ï¸ 3. Mise en Å“uvre TLS/SSL

### ğŸ” GÃ©nÃ©ration de certificats auto-signÃ©s


# AutoritÃ© racine (Root CA)
openssl genrsa -out rootCA.key 4096
openssl req -x509 -new -key rootCA.key -sha256 -days 3650 -out rootCA.crt

# Certificat serveur
openssl genrsa -out server.key 2048
openssl req -new -key server.key -out server.csr
openssl x509 -req -in server.csr -CA rootCA.crt -CAkey rootCA.key -CAcreateserial -out server.crt -days 365 -sha256
ğŸ’¡ Utiliser Let's Encrypt en production pour les services web publics (via certbot)

ğŸ•¸ï¸ Serveur Web (Nginx â€“ HTTPS)
nginx

server {
  listen 443 ssl;
  server_name secure.example.com;

  ssl_certificate /etc/ssl/certs/server.crt;
  ssl_certificate_key /etc/ssl/private/server.key;

  ssl_protocols TLSv1.2 TLSv1.3;
  ssl_ciphers 'HIGH:!aNULL:!MD5';

  location / {
    proxy_pass http://localhost:8080;
  }
}
ğŸŒ 4. VPN ChiffrÃ©s
ğŸ” IPsec (Strongswan)
Chiffrement natif au niveau IP

Compatible avec pare-feux, routeurs

Authentification par certificats ou PSK


apt install strongswan
# Configuration dans /etc/ipsec.conf et /etc/ipsec.secrets
âš¡ WireGuard (recommandÃ©, moderne)
bash
Copier
Modifier
# Installation
apt install wireguard
wg genkey | tee privatekey | wg pubkey > publickey
Ports : UDP/51820

Ultra rapide, simple Ã  configurer

Chiffrement via ChaCha20-Poly1305

ğŸŒ OpenVPN

apt install openvpn easy-rsa
make-cadir /etc/openvpn/easy-rsa
# GÃ©nÃ©ration des clÃ©s + fichiers .ovpn
ğŸ§‘â€ğŸ’» 5. AccÃ¨s et services sÃ©curisÃ©s
ğŸ” SSH
ClÃ©s RSA/ECDSA/ED25519 obligatoires

Interdire root, password :


PermitRootLogin no
PasswordAuthentication no
ğŸ–¥ï¸ RDP
Utiliser via VPN ou TLS interne

Activer NLA (Network Level Authentication)

ğŸ—‚ï¸ SMB
Utiliser SMB v3 avec chiffrement :

powershell

Set-SmbServerConfiguration -EncryptData $true
ğŸ” 6. Tests et vÃ©rifications
ğŸ”§ Tester un port sÃ©curisÃ© (OpenSSL)
bash
Copier
Modifier
openssl s_client -connect example.com:443
ğŸ§ª Scanner la sÃ©curitÃ© SSL/TLS
SSL Labs

Outils CLI :


nmap --script ssl-enum-ciphers -p 443 example.com
ğŸ” VÃ©rifier la validitÃ© dâ€™un certificat
bash
Copier
Modifier
openssl x509 -in server.crt -text -noout
ğŸ“¦ 7. Bonnes pratiques
ğŸ”„ Renouveler les certificats tous les 6â€“12 mois

ğŸ” Automatiser les renouvellements (Certbot + cron)

ğŸ›¡ï¸ Utiliser des algorithmes modernes (TLS 1.3, SHA256+)

ğŸ“‹ GÃ©rer une PKI interne si besoins internes massifs

ğŸ” Auditer les ports ouverts et services rÃ©guliÃ¨rement

ğŸ”§ 8. Commandes utiles
Action	Commande
GÃ©nÃ©rer un certificat auto-signÃ©	openssl req -x509 ...
Inspecter une connexion SSL	openssl s_client -connect host:port
Lister les protocoles/ports	nmap -sV -p- host
Scanner SSL	sslyze, testssl.sh, nmap --script ssl-*
Tester le VPN	ping, traceroute, wg show, ipsec status

ğŸ§¾ 9. Annexes & RÃ©fÃ©rences
ğŸ” Mozilla SSL Configuration Generator

ğŸŒ SSL Labs - Test public

ğŸ“– OpenSSL Cookbook

ğŸ“¦ WireGuard Docs

ğŸ“˜ ANSSI â€“ Guide VPN sÃ©curisÃ©
